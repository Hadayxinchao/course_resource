(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var s={},i=[],o=0;o<t.length;o++){var l=t[o],c=a.base?l[0]+a.base:l[0],d=s[c]||0,h="".concat(c," ").concat(d);s[c]=d+1;var p=n(h),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var m=r(u,a);a.byIndex=o,e.splice(o,0,{identifier:h,updater:m,references:1})}i.push(h)}return i}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=a(t=t||[],r=r||{});return function(t){t=t||[];for(var i=0;i<s.length;i++){var o=n(s[i]);e[o].references--}for(var l=a(t,r),c=0;c<s.length;c++){var d=n(s[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(a)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(i[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);a&&i[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},365:(t,e,n)=>{n.d(e,{A:()=>o});var a=n(601),r=n.n(a),s=n(314),i=n.n(s)()(r());i.push([t.id,"* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nbody {\n  font-family: 'Arial', sans-serif;\n  padding: 20px;\n  background-color: #f0f0f0;\n}\n\n.game-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 40px;\n  margin-top: 20px;\n}\n\n.board-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.game-board {\n  display: flex;\n  flex-direction: column;\n  border: 2px solid #333;\n  background-color: #b3d9ff;\n  margin: 10px 0;\n}\n\n.board-row {\n  display: flex;\n}\n\n.board-cell {\n  width: 30px;\n  height: 30px;\n  border: 1px solid #7bafd4;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.board-cell:hover {\n  background-color: rgba(255, 255, 255, 0.5);\n}\n\n.board-cell.ship {\n  background-color: #555;\n}\n\n.board-cell.hit {\n  background-color: #ff6666;\n}\n\n.board-cell.hit.ship {\n  background-color: #cc0000;\n}\n\n.control-panel {\n  width: 100%;\n  max-width: 600px;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n  text-align: center;\n}\n\n.control-panel button {\n  padding: 8px 16px;\n  margin: 10px;\n  background-color: #4285f4;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.control-panel button:hover {\n  background-color: #2b6bc3;\n}\n\n.ship-info {\n  font-weight: bold;\n  margin: 10px 0;\n}\n\n.status-message {\n  margin: 15px 0;\n  font-weight: bold;\n  color: #333;\n}\n\nh2 {\n  color: #333;\n  margin-bottom: 10px;\n}\n\n.computer-board .ship:not(.hit) {\n  background-color: #b3d9ff;\n}\n\n.start-button, .reset-button {\n  background-color: #28a745;\n  display: none;\n}\n\n.board-cell.computer-targeting {\n  animation: pulse 1s infinite;\n  box-shadow: 0 0 0 2px #ff0000;\n}\n\n@keyframes pulse {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n.ship-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 10px;\n  margin: 20px 0;\n  padding: 10px;\n  background-color: #eaeaea;\n  border-radius: 5px;\n}\n\n.ship-piece {\n  background-color: #555;\n  border: 1px solid #333;\n  cursor: grab;\n  border-radius: 3px;\n  transition: transform 0.2s;\n}\n\n.ship-piece:hover {\n  transform: scale(1.05);\n  box-shadow: 0 0 5px rgba(0,0,0,0.3);\n}\n\n.board-cell.dragover {\n  background-color: rgba(144, 238, 144, 0.5);\n}\n\n.board-cell.invalid-placement {\n  background-color: rgba(255, 99, 71, 0.5);\n}\n\n.pass-device-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.pass-device-content {\n  background-color: white;\n  padding: 40px;\n  border-radius: 10px;\n  text-align: center;\n}\n\n.pass-device-content h2 {\n  margin-bottom: 20px;\n}\n\n.pass-device-content button {\n  padding: 10px 20px;\n  background-color: #4285f4;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.mode-selection {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n  padding: 40px;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  margin: 50px auto;\n  max-width: 400px;\n}\n\n.mode-button {\n  width: 200px;\n  padding: 15px;\n  font-size: 16px;\n  background-color: #4285f4;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.mode-button:hover {\n  background-color: #3367d6;\n}",""]);const o=i},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={id:a,exports:{}};return t[a](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var a=n(72),r=n.n(a),s=n(825),i=n.n(s),o=n(659),l=n.n(o),c=n(56),d=n.n(c),h=n(540),p=n.n(h),u=n(113),m=n.n(u),y=n(365),g={};g.styleTagTransform=m(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=i(),g.insertStyleElement=p(),r()(y.A,g),y.A&&y.A.locals&&y.A.locals;class f{constructor(t,e){this.length=e,this.hits=0,this.sunk=!1}hit(){this.hits++,this.hits===this.length&&(this.sunk=!0)}isSunk(){return this.sunk}}class b{constructor(){this.board=this.createBoard(),this.ships=[],this.missedAttacks=[]}placeShip(t,e,n,a){if(!this.isValidPlacement(t,e,n,a))return!1;if(a)for(let a=0;a<t.length;a++)this.board[e+a][n].ship=t;else for(let a=0;a<t.length;a++)this.board[e][n+a].ship=t;return this.ships.push(t),!0}isValidPlacement(t,e,n,a){if(a){if(e+t.length>10)return!1}else if(n+t.length>10)return!1;if(a){for(let a=0;a<t.length;a++)if(this.board[e+a][n].ship)return!1}else for(let a=0;a<t.length;a++)if(this.board[e][n+a].ship)return!1;return!0}receiveAttack(t,e){const n=this.board[t][e];return!n.isHit&&(n.isHit=!0,n.ship?(n.ship.hit(),!0):(this.missedAttacks.push({x:t,y:e}),!1))}allShipsSunk(){return this.ships.every((t=>t.isSunk()))}createBoard(){const t=[];for(let e=0;e<10;e++){t[e]=[];for(let n=0;n<10;n++)t[e][n]={isHit:!1,ship:null,computerAttack:!1}}return t}}class x{constructor(t){this.gameBoard=new b,this.type=t,this.lastHit=null,this.successfulHits=[],this.targetStack=[],this.huntingDirection=null}attack(t,e,n){return t.receiveAttack(e,n)}computerAttack(t){let e;e=this.targetStack.length>0?this.targetStack.pop():this.getRandomCoordinates(t);const n=e.x,a=e.y,r=this.attack(t,n,a);return r&&(this.successfulHits.push({x:n,y:a}),this.addAdjacentCellsToTargetStack(n,a,t)),{x:n,y:a,hit:r}}getRandomCoordinates(t){let e,n;do{e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random())}while(t.board[e][n].isHit);return{x:e,y:n}}addAdjacentCellsToTargetStack(t,e,n){const a=[{x:t-1,y:e},{x:t+1,y:e},{x:t,y:e-1},{x:t,y:e+1}].filter((t=>this.isValidTarget(t.x,t.y,n)));this.shuffleArray(a),this.targetStack.push(...a)}isValidTarget(t,e,n){return!(t<0||t>=10||e<0||e>=10||n.board[t][e].isHit)}shuffleArray(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}}function v(t){const e=document.createElement("div");e.classList.add("game-board");for(let n=0;n<t.length;n++){const a=document.createElement("div");a.classList.add("board-row");for(let e=0;e<t[n].length;e++){const r=document.createElement("div");r.classList.add("board-cell"),r.dataset.x=n,r.dataset.y=e,t[n][e].isHit&&r.classList.add("hit"),t[n][e].ship&&r.classList.add("ship"),a.appendChild(r)}e.appendChild(a)}return e}class S{constructor(){this.humanPlayer=new x("human"),this.computerPlayer=new x("computer"),this.currentPlayer=this.humanPlayer,this.gameOver=!1,this.setupPhase=!0,this.shipTypes=[{name:"Carrier",length:5},{name:"Battleship",length:4},{name:"Cruiser",length:3},{name:"Submarine",length:3},{name:"Destroyer",length:2}],this.currentShipIndex=0,this.isVertical=!1,this.gameMode="vsComputer"}createModeSelection(){const t=document.createElement("div");t.classList.add("mode-selection");const e=document.createElement("h3");e.textContent="Select Game Mode",t.appendChild(e);const n=document.createElement("button");n.textContent="Play vs Computer",n.classList.add("mode-button"),n.addEventListener("click",(()=>{this.gameMode="vsComputer",this.startSetupPhase(),t.remove()}));const a=document.createElement("button");a.textContent="Two Player Game",a.classList.add("mode-button"),a.addEventListener("click",(()=>{this.gameMode="twoPlayer",this.startSetupPhase(),t.remove()})),t.appendChild(n),t.appendChild(a),document.body.appendChild(t)}startSetupPhase(){if(this.init(),"twoPlayer"===this.gameMode){this.player1=new x("Player 1"),this.player2=new x("Player 2"),this.currentPlayer=this.player1,this.currentSetupPlayer=this.player1;const t=document.querySelector(".board-section h2");t&&(t.textContent="Player 1's Board");const e=document.querySelectorAll(".board-section:nth-child(2) h2");e&&(e.textContent="Player 2's Board"),this.statusMessage.textContent="Player 1: Place your ships"}}init(){this.createGameContainer(),this.createPlayerBoards(),this.createControlPanel(),this.createShipPlacementZone(),this.setupDragAndDrop(),this.setupEventListeners()}showPassDeviceScreen(t,e){const n=document.createElement("div");n.classList.add("pass-device-overlay");const a=document.createElement("div");a.classList.add("pass-device-content");const r=document.createElement("h2");r.textContent=t;const s=document.createElement("button");s.textContent="Continue",s.addEventListener("click",(()=>{if(n.remove(),"twoPlayer"===this.gameMode){const t=document.querySelector(".board-section h2"),e=document.querySelectorAll(".board-section:nth-child(2) h2");this.currentPlayer===this.player1?(t.textContent="Player 1's Board",e[0].textContent="Player 2's Board"):(t.textContent="Player 2's Board",e[0].textContent="Player 1's Board"),this.updateBoards()}e&&e()})),a.appendChild(r),a.appendChild(s),n.appendChild(a),document.body.appendChild(n)}createGameContainer(){const t=document.createElement("div");t.classList.add("game-container"),document.body.appendChild(t),this.container=t}createPlayerBoards(){const t=document.createElement("div");t.classList.add("board-section");const e=document.createElement("h2");e.textContent="Your Board",this.playerBoardSection=v(this.humanPlayer.gameBoard.board),this.playerBoardSection.classList.add("player-board"),t.appendChild(e),t.appendChild(this.playerBoardSection);const n=document.createElement("div");n.classList.add("board-section");const a=document.createElement("h2");a.textContent="Enemy Board",this.computerBoardSection=v(this.computerPlayer.gameBoard.board),this.computerBoardSection.classList.add("computer-board"),n.appendChild(a),n.appendChild(this.computerBoardSection),this.container.appendChild(t),this.container.appendChild(n)}createControlPanel(){const t=document.createElement("div");t.classList.add("control-panel");const e=document.createElement("p");e.textContent="Place your ships on the board. Click 'Rotate Ship' to change orientation.",t.appendChild(e),this.shipInfo=document.createElement("div"),this.shipInfo.classList.add("ship-info"),this.updateShipInfo(),t.appendChild(this.shipInfo);const n=document.createElement("button");n.textContent="Rotate Ship",n.addEventListener("click",(()=>{this.isVertical=!this.isVertical,this.updateShipInfo()})),t.appendChild(n);const a=document.createElement("button");a.textContent="Randomize Ships",a.addEventListener("click",(()=>{"twoPlayer"===this.gameMode?this.placeShipsRandomly():(r.style.display="inline-block",this.placeShipsRandomly(),this.createShipPlacementZone(),this.setupDragAndDrop())})),t.appendChild(a),this.statusMessage=document.createElement("p"),this.statusMessage.classList.add("status-message"),this.statusMessage.textContent="Place your ships to begin.",t.appendChild(this.statusMessage);const r=document.createElement("button");r.textContent="Start Game",r.classList.add("start-button"),r.addEventListener("click",(()=>{if(this.setupPhase){s.style.display="inline-block",r.style.display="none";const t=this.controlPanel.querySelector(".ship-container");this.controlPanel.removeChild(t),this.finishSetup()}else this.statusMessage.textContent="Game already started!"})),t.appendChild(r);const s=document.createElement("button");s.textContent="Reset Game",s.classList.add("reset-button"),s.addEventListener("click",(()=>{s.style.display="none",r.style.display="none",this.humanPlayer.gameBoard=new b,this.computerPlayer.gameBoard=new b,this.currentShipIndex=0,this.isVertical=!1,this.setupPhase=!0,this.gameOver=!1,this.currentPlayer=this.humanPlayer,this.updatePlayerBoard(),this.updateComputerBoard(),this.updateShipInfo(),this.statusMessage.textContent="Place your ships to begin."})),t.appendChild(s),this.container.appendChild(t),this.controlPanel=t}updateShipInfo(){if(this.currentShipIndex<this.shipTypes.length){const t=this.shipTypes[this.currentShipIndex];this.shipInfo.textContent=`Placing ${t.name} (${t.length} cells) - Orientation: ${this.isVertical?"Vertical":"Horizontal"}`}else this.shipInfo.textContent="All ships placed!"}createShipPlacementZone(){const t=this.controlPanel.querySelector(".ship-container");t&&this.controlPanel.removeChild(t);const e=document.createElement("div");e.classList.add("ship-container"),this.shipTypes.forEach(((t,n)=>{const a=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("div");return n.classList.add("ship-piece"),n.style.width=e?"30px":30*t.length+"px",n.style.height=e?30*t.length+"px":"30px",n.dataset.length=t.length,n.draggable=!0,n}(new f(t.name,t.length));a.id=`ship-${n}`,a.dataset.index=n,a.dataset.name=t.name,a.dataset.length=t.length,a.setAttribute("draggable",!0),a.addEventListener("dragstart",this.handleDragStart.bind(this)),e.appendChild(a)})),this.controlPanel.appendChild(e)}setupDragAndDrop(){const t=this.playerBoardSection.querySelectorAll(".board-cell"),e=this.controlPanel.querySelector(".ship-container");e.hasChildNodes()||this.controlPanel.removeChild(e),t.forEach((t=>{t.addEventListener("dragover",this.handleDragOver.bind(this)),t.addEventListener("drop",this.handleDrop.bind(this)),t.addEventListener("dragenter",this.handleDragEnter.bind(this)),t.addEventListener("dragleave",this.handleDragLeave.bind(this))})),document.querySelectorAll(".ship-piece").forEach((t=>{t.addEventListener("contextmenu",(e=>{e.preventDefault(),t.classList.contains("vertical")?(t.classList.remove("vertical"),t.style.width=30*parseInt(t.dataset.length)+"px",t.style.height="30px"):(t.classList.add("vertical"),t.style.height=30*parseInt(t.dataset.length)+"px",t.style.width="30px")}))}))}setupEventListeners(){this.playerBoardSection.querySelectorAll(".board-cell").forEach((t=>{t.addEventListener("click",(e=>{if(this.setupPhase&&this.currentShipIndex<this.shipTypes.length){const e=parseInt(t.dataset.x),n=parseInt(t.dataset.y);this.placePlayerShip(e,n)}}))})),this.computerBoardSection.querySelectorAll(".board-cell").forEach((t=>{t.addEventListener("click",(e=>{if(!this.setupPhase&&!this.gameOver&&("twoPlayer"===this.gameMode||"vsComputer"===this.gameMode&&this.currentPlayer===this.humanPlayer)){const e=parseInt(t.dataset.x),n=parseInt(t.dataset.y);this.playerAttack(e,n)}}))}))}handleDragStart(t){this.draggedShip=t.target,t.dataTransfer.setData("text/plain",t.target.id),this.isVertical=t.target.classList.contains("vertical")}handleDragOver(t){t.preventDefault()}handleDragEnter(t){t.preventDefault(),t.target.classList.add("dragover")}handleDragLeave(t){t.target.classList.remove("dragover")}handleDrop(t){t.preventDefault(),t.target.classList.remove("dragover");const e=parseInt(t.target.dataset.x),n=parseInt(t.target.dataset.y),a=parseInt(this.draggedShip.dataset.index),r=this.shipTypes[a],s=new f(r.name,r.length);if(this.humanPlayer.gameBoard.placeShip(s,e,n,this.isVertical)){if(this.updatePlayerBoard(),this.draggedShip.remove(),this.currentShipIndex++,this.updateShipInfo(),this.currentShipIndex>=this.shipTypes.length){const t=document.querySelector(".start-button");t&&(t.style.display="inline-block")}}else this.statusMessage.textContent="Invalid ship placement. Try again.";this.setupDragAndDrop()}placePlayerShip(t,e){const n=this.shipTypes[this.currentShipIndex],a=new f(n.name,n.length);if(("twoPlayer"===this.gameMode?this.currentSetupPlayer.gameBoard:this.humanPlayer.gameBoard).placeShip(a,t,e,this.isVertical)){if(this.updatePlayerBoard(),this.currentShipIndex++,this.updateShipInfo(),this.currentShipIndex>=this.shipTypes.length){const t=document.querySelector(".start-button");t&&"twoPlayer"!==this.gameMode?t.style.display="inline-block":"twoPlayer"===this.gameMode&&this.finishSetup()}}else this.statusMessage.textContent="Invalid ship placement. Try again."}placeShipsRandomly(){if("twoPlayer"===this.gameMode){if(this.currentSetupPlayer.gameBoard,this.currentSetupPlayer.gameBoard=new b,this.shipTypes.forEach((t=>{const e=new f(t.name,t.length);let n=!1;for(;!n;){const t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),r=Math.random()<.5;this.currentSetupPlayer.gameBoard.placeShip(e,t,a,r)&&(n=!0)}})),this.currentShipIndex=this.shipTypes.length,this.updateShipInfo(),this.currentSetupPlayer===this.player1){const t=v(this.player1.gameBoard.board);this.playerBoardSection.replaceWith(t),this.playerBoardSection=t,this.playerBoardSection.classList.add("player-board")}else{const t=v(this.player2.gameBoard.board);this.playerBoardSection.replaceWith(t),this.playerBoardSection=t,this.playerBoardSection.classList.add("player-board")}this.finishSetup()}else this.humanPlayer.gameBoard=new b,this.shipTypes.forEach((t=>{const e=new f(t.name,t.length);let n=!1;for(;!n;){const t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),r=Math.random()<.5;this.humanPlayer.gameBoard.placeShip(e,t,a,r)&&(n=!0)}})),this.currentShipIndex=this.shipTypes.length,this.updateShipInfo(),this.updatePlayerBoard()}finishSetup(){if("twoPlayer"===this.gameMode)if(this.currentSetupPlayer===this.player1)this.currentSetupPlayer=this.player2,this.showPassDeviceScreen("Pass the device to Player 2",(()=>{const t=document.querySelector(".board-section h2");t&&(t.textContent="Player 2's Board");const e=document.querySelector(".board-section:nth-child(2) h2");e&&(e.textContent="Player 1's Board"),this.currentShipIndex=0,this.isVertical=!1,this.updateShipInfo(),this.createShipPlacementZone(),this.setupDragAndDrop(),this.playerBoardSection=v(this.player2.gameBoard.board),document.querySelector(".board-section .game-board").replaceWith(this.playerBoardSection),this.playerBoardSection.classList.add("player-board"),this.setupEventListeners(),this.statusMessage.textContent="Player 2: Place your ships"}));else{this.setupPhase=!1,this.currentPlayer=this.player1;const t=this.controlPanel.querySelector(".ship-container");t&&this.controlPanel.removeChild(t),this.showPassDeviceScreen("Game is starting! Pass the device to Player 1",(()=>{const t=document.querySelector(".board-section h2");t&&(t.textContent="Player 1's Board");const e=document.querySelector(".board-section:nth-child(2) h2");e&&(e.textContent="Player 2's Board"),this.updateBoards(),this.statusMessage.textContent="Player 1's turn to attack!"}))}else this.setupPhase=!1,this.statusMessage.textContent="Game started. Your turn to attack!",this.placeComputerShipsRandomly()}placeComputerShipsRandomly(){this.shipTypes.forEach((t=>{const e=new f(t.name,t.length);let n=!1;for(;!n;){const t=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),r=Math.random()>.5;this.computerPlayer.gameBoard.placeShip(e,t,a,r)&&(n=!0)}}))}playerAttack(t,e){if("twoPlayer"===this.gameMode)return void this.twoPlayerAttack(t,e);if(this.computerPlayer.gameBoard.board[t][e].isHit)return;const n=this.humanPlayer.attack(this.computerPlayer.gameBoard,t,e);if(this.updateComputerBoard(),this.statusMessage.textContent=n?"Hit!":"Miss!",this.computerPlayer.gameBoard.allShipsSunk())return this.gameOver=!0,void(this.statusMessage.textContent="You win! All enemy ships sunk!");this.currentPlayer=this.computerPlayer,setTimeout((()=>this.computerTurn()),1e3)}twoPlayerAttack(t,e){const n=this.currentPlayer===this.player1?this.player1:this.player2,a=this.currentPlayer===this.player1?this.player2:this.player1;if(a.gameBoard.board[t][e].isHit)return;const r=n.attack(a.gameBoard,t,e);if(this.updateBoards(),this.statusMessage.textContent=r?"Hit!":"Miss!",a.gameBoard.allShipsSunk()){this.gameOver=!0;const t=n===this.player1?"Player 1":"Player 2";return void(this.statusMessage.textContent=`${t} wins! All enemy ships sunk!`)}this.currentPlayer=this.currentPlayer===this.player1?this.player2:this.player1;const s=this.currentPlayer===this.player1?"Player 1":"Player 2";this.showPassDeviceScreen(`${s}'s turn!`,(()=>{this.statusMessage.textContent=`${s}'s turn!`}))}updateBoards(){if("twoPlayer"===this.gameMode){const t=this.currentPlayer===this.player1?this.player1:this.player2,e=this.currentPlayer===this.player1?this.player2:this.player1,n=v(t.gameBoard.board);this.playerBoardSection.replaceWith(n),this.playerBoardSection=n,this.playerBoardSection.classList.add("player-board");const a=v(e.gameBoard.board);this.computerBoardSection.replaceWith(a),this.computerBoardSection=a,this.computerBoardSection.classList.add("computer-board"),this.computerBoardSection.querySelectorAll(".ship:not(.hit)").forEach((t=>{t.classList.remove("ship")})),this.computerBoardSection.querySelectorAll(".board-cell").forEach((t=>{t.addEventListener("click",(e=>{if(!this.setupPhase&&!this.gameOver){const e=parseInt(t.dataset.x),n=parseInt(t.dataset.y);this.playerAttack(e,n)}}))}))}else this.updatePlayerBoard(),this.updateComputerBoard()}computerTurn(){const t=this.computerPlayer.computerAttack(this.humanPlayer.gameBoard),e=t.x,n=t.y;this.highlightAttackCell(e,n),setTimeout((()=>{if(this.updatePlayerBoard(),t.hit?this.statusMessage.textContent=`Computer hit at (${e}, ${n})!`:this.statusMessage.textContent=`Computer missed at (${e}, ${n})!`,this.humanPlayer.gameBoard.allShipsSunk())return this.gameOver=!0,void(this.statusMessage.textContent="You lose! All your ships sunk!");this.currentPlayer=this.humanPlayer,setTimeout((()=>{this.statusMessage.textContent="Your turn!"}),1e3)}),1e3)}getComputerAttackCoordinates(){let t,e;do{t=Math.floor(10*Math.random()),e=Math.floor(10*Math.random())}while(this.humanPlayer.gameBoard.board[t][e].isHit);return{x:t,y:e}}highlightAttackCell(t,e){const n=[...this.playerBoardSection.querySelectorAll(".board-cell")].find((n=>parseInt(n.dataset.x)===t&&parseInt(n.dataset.y)===e));n&&(n.classList.add("computer-targeting"),this.statusMessage.textContent=`Computer attacking at (${t}, ${e})...`)}updatePlayerBoard(){const t=v(this.humanPlayer.gameBoard.board);this.playerBoardSection.replaceWith(t),this.playerBoardSection=t,this.playerBoardSection.classList.add("player-board"),this.setupPhase&&this.playerBoardSection.querySelectorAll(".board-cell").forEach((t=>{t.addEventListener("click",(e=>{if(this.setupPhase&&this.currentShipIndex<this.shipTypes.length){const e=parseInt(t.dataset.x),n=parseInt(t.dataset.y);this.placePlayerShip(e,n)}}))}))}updateComputerBoard(){const t=v(this.computerPlayer.gameBoard.board);this.computerBoardSection.replaceWith(t),this.computerBoardSection=t,this.computerBoardSection.classList.add("computer-board"),this.computerBoardSection.querySelectorAll(".ship:not(.hit)").forEach((t=>{t.classList.remove("ship")})),this.computerBoardSection.querySelectorAll(".board-cell").forEach((t=>{t.addEventListener("click",(e=>{if(!this.setupPhase&&this.currentPlayer===this.humanPlayer&&!this.gameOver){const e=parseInt(t.dataset.x),n=parseInt(t.dataset.y);this.playerAttack(e,n)}}))}))}}document.addEventListener("DOMContentLoaded",(()=>{(new S).createModeSelection()}))})();